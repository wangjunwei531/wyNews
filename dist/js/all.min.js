angular.module("myApp",["ionic","jett.ionic.filter.bar","myApp.tabs","myApp.news","myApp.live","myApp.topic","myApp.me","cftApp.httpFactory","cftApp.slideBox","myApp.newsDetail"]).config([function(){}]).controller("mainController",["$scope",function(){}]),angular.module("myApp.live",["ionic"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("tabs.live",{url:"/live",views:{"tabs-live":{templateUrl:"tabs_live.html",controller:"liveController"}}})}]).controller("liveController",["$scope",function(e){}]),angular.module("myApp.me",[]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("tabs.me",{url:"/me",views:{"tabs-me":{templateUrl:"tabs_me.html",controller:"meController"}}})}]).controller("meController",["$scope",function(e){}]),angular.module("myApp.news",[]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("tabs.news",{url:"/news",views:{"tabs-news":{templateUrl:"tabs_news.html",controller:"newsController"}}}),t.otherwise("/tabs/news")}]).controller("newsController",["$scope","$state","$stateParams","$ionicSlideBoxDelegate","$ionicViewSwitcher","HttpFactory",function(e,t,o,n,r,l){console.log("????"),console.log(o);var i=0;e.news={};var a="http://c.m.163.com/nc/topicset/ios/subscribe/manage/listspecial.html";l.getData(a).then(function(t){e.news.nameArray=t}),e.news.joinDetail=function(){t.go("newsDetail"),r.nextDirection("forward")};var s=[];e.news.dataRefresh=function(){var t="http://c.m.163.com/recommend/getSubDocPic?from=toutiao&prog=LMA1&open=&openpath=&fn=1&passport=&devId=%2BnrKMbpU9ZDPUOhb9gvookO3HKJkIOzrIg%2BI9FhrLRStCu%2B7ZneFbZ30i61TL9kY&offset=0&size=10&version=17.1&spever=false&net=wifi&lat=&lon=&ts=1480666192&sign=yseE2FNVWcJVjhvP48U1nPHyzZCKpBKh%2BaOhOE2d6GR48ErR02zJ6%2FKXOnxX046I&encryption=1&canal=appstore";l.getData(t).then(function(t){t[0].ads?(e.news.adsArray=t[0].ads,t.splice(0,1),s=s.concat(t)):s=s.concat(t),e.news.itemsArray=s,e.$broadcast("scroll.refreshComplete"),i=1})},e.news.canSlide=function(e){n.$getByHandle("mainSlideBox").enableSlide(e)},e.news.dataLoading=function(){i+=1;var t="http://c.m.163.com/recommend/getSubDocPic?from=toutiao&prog=LMA1&open=&openpath=&fn=1&passport=&devId=%2BnrKMbpU9ZDPUOhb9gvookO3HKJkIOzrIg%2BI9FhrLRStCu%2B7ZneFbZ30i61TL9kY&offset="+i+"&size=10&version=17.1&spever=false&net=wifi&lat=&lon=&ts=1480666192&sign=yseE2FNVWcJVjhvP48U1nPHyzZCKpBKh%2BaOhOE2d6GR48ErR02zJ6%2FKXOnxX046I&encryption=1&canal=appstore";l.getData(t).then(function(t){t[0].ads?(e.news.adsArray=t[0].ads,t.splice(0,1),s=s.concat(t)):s=s.concat(t),e.news.itemsArray=s,e.$broadcast("scroll.infiniteScrollComplete")})},e.news.dataRefresh()}]),angular.module("myApp.newsDetail",["ionic"]).config(["$stateProvider",function(e){e.state("newsDetail",{url:"/newsDetail",views:{mainPage:{templateUrl:"news_detail.html",controller:"newsDetailController"}}})}]).controller("newsDetailController",[function(){}]),angular.module("myApp.tabs",["ionic"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("tabs",{url:"/tabs",views:{mainPage:{templateUrl:"tabs.html",controller:"tabsController"}}})}]).controller("tabsController",["$scope",function(e){}]),angular.module("myApp.topic",[]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("tabs.topic",{url:"/topic",views:{"tabs-topic":{templateUrl:"tabs_topic.html",controller:"topicController"}}})}]).controller("topicController",["$scope",function(e){}]),angular.module("cftApp.httpFactory",[]).factory("HttpFactory",["$http","$q",function(e,t){return{getData:function(o,n){if(o){var r=t.defer();return o="http://localhost:3000/?myUrl="+encodeURIComponent(o),n=n?n:"GET",e({url:o,method:n,timeout:2e4}).then(function(e){e=e.data,e=e[Object.keys(e)[0]],r.resolve(e)},function(e){r.reject(e)}),r.promise}}}}]),angular.module("cftApp.slideBox",[]).directive("mgSlideBox",[function(){return{restrict:"E",scope:{sourceArray:"="},template:'<div class="topCarousel"><ion-slide-box delegate-handle="topCarouselSlideBox" on-slide-changed="slideHasChanged($index)" show-pager="true"  ng-if="isShowSlideBox" on-drag="drag($event)"> <ion-slide ng-repeat="ads in sourceArray track by $index" ng-click="goToDetailView($index)"><img ng-src="{{ads.imgsrc}}" class="topCarouselImg"></ion-slide> </ion-slide-box><div class="slideBottomDiv"></div></div>',controller:["$scope","$element","$ionicSlideBoxDelegate","$timeout",function(e,t,o,n){e.goToDetailView=function(e){console.log("进入详情页"+e)};var r=t[0].lastElementChild;e.$watch("sourceArray",function(t,l){t&&t.length&&(l&&l.length&&t.length!=l.length?(e.isShowSlideBox=!1,n(function(){e.isShowSlideBox=!0},10)):e.isShowSlideBox=!0,o.$getByHandle("topCarouselSlideBox").loop(!0),console.log(r),r.innerText=e.sourceArray[0].title)}),e.slideHasChanged=function(t){r.innerText=e.sourceArray[t].title},o.$getByHandle("mainSlideBox").enableSlide(!1),e.drag=function(e){o.$getByHandle("topCarouselSlideBox").loop(!0),o.$getByHandle("mainSlideBox").enableSlide(!1),e.stopPropagation()}}],replace:!0,link:function(e,t,o){}}}]);